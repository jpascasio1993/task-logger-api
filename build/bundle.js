(()=>{"use strict";var t={180:t=>{t.exports=require("regenerator-runtime/runtime")},680:(t,s,e)=>{const a=require("express");var r=e.n(a);const o=require("cors");var n=e.n(o);const i=require("helmet");var c=e.n(i);const l=require("mongoose");var u=e.n(l);const d=(0,a.Router)();d.get("/tasks",(async(t,s,e)=>{const a=s.locals.context,r=await a.getTasks.execute(t.body);if("success"===r.type)return s.status(200).json(r),void e();s.status(500).json(r),e()})),d.post("/tasks",(async(t,s,e)=>{const a=s.locals.context,r=await a.createTasks.execute(t.body);if("success"===r.type)return s.status(200).json(r),void e();s.status(500).json(r),e()})),d.put("/tasks",(async(t,s,e)=>{const a=s.locals.context,r=await a.updateTask.execute(t.body);if("success"===r.type)return s.status(200).json(r),void e();s.status(500).json(r),e()})),d.delete("/tasks",(async(t,s,e)=>{const a=s.locals.context,r=await a.deleteTask.execute(t.body);if("success"===r.type)return s.status(200).json(r),void e();s.status(500).json(r),e()}));const k=d,y=(0,a.Router)();y.use("/tasks_logger",k);const p=y,T=t=>({data:t,error:null,isSuccess:!0}),m=t=>({error:t,isSuccess:!1}),g=require("lodash");class w{taskCollection;constructor(t){this.taskCollection=t}async deleteTask(t){const s=await this.taskCollection.startSession();try{s.startTransaction();const e=await this.taskCollection.deleteMany({_id:{$in:t.ids}},{session:s});return await s.commitTransaction(),T(e)}catch(t){return console.error(t),await s.abortTransaction(),m(t)}finally{await s.endSession()}}async updateTask(t){const s=await this.taskCollection.startSession();try{s.startTransaction();const e=t.tasks.map((t=>(0,g.omitBy)(t,g.isNil))).map((t=>({updateOne:{filter:{_id:t._id},update:{$set:(0,g.omit)(t,"_id")}}}))),a=await this.taskCollection.bulkWrite(e,{session:s});return await s.commitTransaction(),T(a)}catch(t){return console.error(t),await s.abortTransaction(),m(t)}finally{await s.endSession()}}async createTasks(t){const s=await this.taskCollection.startSession();try{s.startTransaction();const e=t.tasks.map((t=>(0,g.omitBy)(t,g.isNil))),a=await this.taskCollection.create(e,{session:s});return await s.commitTransaction(),T(a)}catch(t){return await s.abortTransaction(),m(t)}finally{await s.endSession()}}async getTasks(t){try{const s=(0,g.omitBy)(t,g.isNil),e=(0,g.reduce)(s,((t,s,e)=>(t[e]=(0,g.isBoolean)(s)||"_id"===e?s:{$regex:s,$options:"i"},t)),{}),a=await this.taskCollection.find(e);return T(a)}catch(t){return m(t)}}}const h=new l.Schema({title:{type:String,required:!0},description:{type:String,required:!0},dateTime:{type:Date,default:Date.now},completed:{type:Boolean,default:!1}},{timestamps:!0}),f=(0,l.model)("Task",h),x=({title:t,message:s,data:e})=>({data:e,type:"success",title:t,message:s}),v=({title:t,message:s,error:e})=>({error:e,type:"error",title:t,message:s}),S={getTasks:new class{taskRepository;constructor(t){this.taskRepository=t}async execute(t){const s=await this.taskRepository.getTasks(t);return s.isSuccess?x({title:"Get Tasks",message:"Tasks fetched successfully",data:s.data}):v({title:"Get Tasks",message:"Failed to retrieve tasks",error:s.error})}}(new w(f)),createTasks:new class{taskRepository;constructor(t){this.taskRepository=t}async execute(t){const s=await this.taskRepository.createTasks(t);return s.isSuccess?x({title:"Create Tasks",message:"Tasks created successfully",data:s.data}):v({title:"Create Tasks",message:"Failed to create tasks",error:s.error})}}(new w(f)),updateTask:new class{taskRepository;constructor(t){this.taskRepository=t}async execute(t){const s=await this.taskRepository.updateTask(t);return s.isSuccess?x({title:"Update Tasks",message:"Tasks updated successfully",data:s.data}):v({title:"Update Tasks",message:"Failed to update tasks",error:s.error})}}(new w(f)),deleteTask:new class{taskRepository;constructor(t){this.taskRepository=t}async execute(t){const s=await this.taskRepository.deleteTask(t);return s.isSuccess?x({title:"Delete Tasks",message:"Tasks deleted successfully",data:s.data}):v({title:"Delete Tasks",message:"Failed to delete tasks",error:s.error})}}(new w(f))},j=r()();j.use(c()()).use(n()({origin:(t,s)=>{s(null,!0)}})).use(r().json()).use(((t,s,e)=>{s.locals.context=S,e()})).use(p),j.get("/",((t,s)=>{s.send("âœ… MongoDB connected successfully!")})),u().connect("mongodb+srv://jpascasio1993dev:4oTpMjAzOs2TrwIg@free-cluster-0.u2pjyxz.mongodb.net/").then((()=>{j.listen(3e3,(()=>{console.log("Server is running on port 3000")})).on("error",(t=>{console.error("[Server] Error starting server: ",t),process.exit(1)}))})).catch((t=>{console.error("[MongoDB] Error connecting to MongoDB: ",t),process.exit(1)}))}},s={};function e(a){var r=s[a];if(void 0!==r)return r.exports;var o=s[a]={exports:{}};return t[a](o,o.exports,e),o.exports}e.n=t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},e.d=(t,s)=>{for(var a in s)e.o(s,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:s[a]})},e.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),e(180),e(680)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNsREMsUUFBUUMsS0FBSyxFQUFFLEdBQ2YsSUFFTEMsT0FBT0gsSUFDTnJELFFBQVFsQixNQUFNLDBDQUEyQ3VFLEdBQ3pEQyxRQUFRQyxLQUFLLEVBQUUsRyxHRTdDZkUsRUFBMkIsQ0FBQyxFQUdoQyxTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCRSxJQUFqQkQsRUFDSCxPQUFPQSxFQUFhekcsUUFHckIsSUFBSUQsRUFBU3VHLEVBQXlCRSxHQUFZLENBR2pEeEcsUUFBUyxDQUFDLEdBT1gsT0FIQTJHLEVBQW9CSCxHQUFVekcsRUFBUUEsRUFBT0MsUUFBU3VHLEdBRy9DeEcsRUFBT0MsT0FDZixDQ3JCQXVHLEVBQW9CSyxFQUFLN0csSUFDeEIsSUFBSThHLEVBQVM5RyxHQUFVQSxFQUFPK0csV0FDN0IsSUFBTy9HLEVBQWlCLFFBQ3hCLElBQU0sRUFFUCxPQURBd0csRUFBb0JRLEVBQUVGLEVBQVEsQ0FBRUcsRUFBR0gsSUFDNUJBLENBQU0sRUNMZE4sRUFBb0JRLEVBQUksQ0FBQy9HLEVBQVNpSCxLQUNqQyxJQUFJLElBQUloRCxLQUFPZ0QsRUFDWFYsRUFBb0JXLEVBQUVELEVBQVloRCxLQUFTc0MsRUFBb0JXLEVBQUVsSCxFQUFTaUUsSUFDNUVrRCxPQUFPQyxlQUFlcEgsRUFBU2lFLEVBQUssQ0FBRW9ELFlBQVksRUFBTWpILElBQUs2RyxFQUFXaEQsSUFFMUUsRUNORHNDLEVBQW9CVyxFQUFJLENBQUNJLEVBQUtDLElBQVVKLE9BQU9LLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEdDR2xGaEIsRUFBb0IsS0FDTUEsRUFBb0IsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3Rhc2tfbG9nZ2luZ19zeXN0ZW1fYmFja2VuZC9leHRlcm5hbCBjb21tb25qcyBcInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZVwiIiwid2VicGFjazovL3Rhc2tfbG9nZ2luZ19zeXN0ZW1fYmFja2VuZC9leHRlcm5hbCBjb21tb25qcyBcImV4cHJlc3NcIiIsIndlYnBhY2s6Ly90YXNrX2xvZ2dpbmdfc3lzdGVtX2JhY2tlbmQvZXh0ZXJuYWwgY29tbW9uanMgXCJjb3JzXCIiLCJ3ZWJwYWNrOi8vdGFza19sb2dnaW5nX3N5c3RlbV9iYWNrZW5kL2V4dGVybmFsIGNvbW1vbmpzIFwiaGVsbWV0XCIiLCJ3ZWJwYWNrOi8vdGFza19sb2dnaW5nX3N5c3RlbV9iYWNrZW5kL2V4dGVybmFsIGNvbW1vbmpzIFwibW9uZ29vc2VcIiIsIndlYnBhY2s6Ly90YXNrX2xvZ2dpbmdfc3lzdGVtX2JhY2tlbmQvLi9yb3V0ZXJzL3Rhc2tfcm91dGVyL3Rhc2tfcm91dGVyLnRzIiwid2VicGFjazovL3Rhc2tfbG9nZ2luZ19zeXN0ZW1fYmFja2VuZC8uL3JvdXRlcnMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vdGFza19sb2dnaW5nX3N5c3RlbV9iYWNrZW5kLy4vZG9tYWluL21vZGVscy9yZXN1bHQudHMiLCJ3ZWJwYWNrOi8vdGFza19sb2dnaW5nX3N5c3RlbV9iYWNrZW5kL2V4dGVybmFsIGNvbW1vbmpzIFwibG9kYXNoXCIiLCJ3ZWJwYWNrOi8vdGFza19sb2dnaW5nX3N5c3RlbV9iYWNrZW5kLy4vZGF0YS9yZXBvc2l0b3J5L3Rhc2tfcmVwb3NpdG9yeV9pbXBsLnRzIiwid2VicGFjazovL3Rhc2tfbG9nZ2luZ19zeXN0ZW1fYmFja2VuZC8uL2RhdGEvY29sbGVjdGlvbnMvdGFza19jb2xsZWN0aW9uLnRzIiwid2VicGFjazovL3Rhc2tfbG9nZ2luZ19zeXN0ZW1fYmFja2VuZC8uL2RhdGEvcmVzcG9uc2UvcmVzcG9uc2UudHMiLCJ3ZWJwYWNrOi8vdGFza19sb2dnaW5nX3N5c3RlbV9iYWNrZW5kLy4vZGF0YS9jb250ZXh0L2luZGV4LnRzIiwid2VicGFjazovL3Rhc2tfbG9nZ2luZ19zeXN0ZW1fYmFja2VuZC8uL2RvbWFpbi91c2VfY2FzZXMvZ2V0X3Rhc2tzLnRzIiwid2VicGFjazovL3Rhc2tfbG9nZ2luZ19zeXN0ZW1fYmFja2VuZC8uL2RvbWFpbi91c2VfY2FzZXMvY3JlYXRlX3Rhc2tzLnRzIiwid2VicGFjazovL3Rhc2tfbG9nZ2luZ19zeXN0ZW1fYmFja2VuZC8uL2RvbWFpbi91c2VfY2FzZXMvdXBkYXRlX3Rhc2sudHMiLCJ3ZWJwYWNrOi8vdGFza19sb2dnaW5nX3N5c3RlbV9iYWNrZW5kLy4vZG9tYWluL3VzZV9jYXNlcy9kZWxldGVfdGFza3MudHMiLCJ3ZWJwYWNrOi8vdGFza19sb2dnaW5nX3N5c3RlbV9iYWNrZW5kLy4vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vdGFza19sb2dnaW5nX3N5c3RlbV9iYWNrZW5kLy4vcm91dGVycy9taWRkbGV3YXJlL21pZGRsZXdhcmUudHMiLCJ3ZWJwYWNrOi8vdGFza19sb2dnaW5nX3N5c3RlbV9iYWNrZW5kL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3Rhc2tfbG9nZ2luZ19zeXN0ZW1fYmFja2VuZC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly90YXNrX2xvZ2dpbmdfc3lzdGVtX2JhY2tlbmQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3Rhc2tfbG9nZ2luZ19zeXN0ZW1fYmFja2VuZC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3Rhc2tfbG9nZ2luZ19zeXN0ZW1fYmFja2VuZC93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiZXhwcmVzc1wiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcImNvcnNcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJoZWxtZXRcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTsiLCJpbXBvcnQgR2V0VGFza1BhcmFtcyBmcm9tICdAL2RhdGEvcGFyYW1zL2dldF90YXNrX3BhcmFtcyc7XG5pbXBvcnQgeyBSb3V0ZXIsIFJlcXVlc3QsIFJlc3BvbnNlLCBOZXh0RnVuY3Rpb24gfSBmcm9tICdleHByZXNzJztcbmltcG9ydCBDb250ZXh0IGZyb20gJ0AvZGF0YS9jb250ZXh0JztcbmltcG9ydCBDcmVhdGVUYXNrUGFyYW1zIGZyb20gJ0AvZGF0YS9wYXJhbXMvY3JlYXRlX3Rhc2tfcGFyYW1zJztcbmltcG9ydCBVcGRhdGVUYXNrUGFyYW1zIGZyb20gJ0AvZGF0YS9wYXJhbXMvdXBkYXRlX3Rhc2tfcGFyYW1zJztcbmltcG9ydCBEZWxldGVUYXNrUGFyYW1zIGZyb20gJ0AvZGF0YS9wYXJhbXMvZGVsZXRlX3Rhc2tfcGFyYW1zJztcbmNvbnN0IHJvdXRlciA9IFJvdXRlcigpO1xuXG5yb3V0ZXIuZ2V0KCcvdGFza3MnLCBhc3luYyAocmVxOiBSZXF1ZXN0PEdldFRhc2tQYXJhbXMsIGFueSwgYW55LCBhbnk+LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pID0+IHtcbiAgICBjb25zdCBjb250ZXh0OiB0eXBlb2YgQ29udGV4dCA9IHJlcy5sb2NhbHMuY29udGV4dDtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNvbnRleHQuZ2V0VGFza3MuZXhlY3V0ZShyZXEuYm9keSk7XG4gICAgaWYgKHJlc3BvbnNlLnR5cGUgPT09ICdzdWNjZXNzJykge1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihyZXNwb25zZSk7XG4gICAgICAgIG5leHQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbihyZXNwb25zZSk7XG4gICAgbmV4dCgpO1xufSk7XG5cbnJvdXRlci5wb3N0KCcvdGFza3MnLCBhc3luYyAocmVxOiBSZXF1ZXN0PENyZWF0ZVRhc2tQYXJhbXMsIGFueSwgYW55LCBhbnk+LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pID0+IHtcbiAgICBjb25zdCBjb250ZXh0OiB0eXBlb2YgQ29udGV4dCA9IHJlcy5sb2NhbHMuY29udGV4dDtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNvbnRleHQuY3JlYXRlVGFza3MuZXhlY3V0ZShyZXEuYm9keSk7XG4gICAgaWYgKHJlc3BvbnNlLnR5cGUgPT09ICdzdWNjZXNzJykge1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihyZXNwb25zZSk7XG4gICAgICAgIG5leHQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbihyZXNwb25zZSk7XG4gICAgbmV4dCgpO1xufSk7XG5cbnJvdXRlci5wdXQoJy90YXNrcycsIGFzeW5jIChyZXE6IFJlcXVlc3Q8VXBkYXRlVGFza1BhcmFtcywgYW55LCBhbnksIGFueT4sIHJlczogUmVzcG9uc2UsIG5leHQ6IE5leHRGdW5jdGlvbikgPT4ge1xuICAgIGNvbnN0IGNvbnRleHQ6IHR5cGVvZiBDb250ZXh0ID0gcmVzLmxvY2Fscy5jb250ZXh0O1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY29udGV4dC51cGRhdGVUYXNrLmV4ZWN1dGUocmVxLmJvZHkpO1xuICAgIGlmIChyZXNwb25zZS50eXBlID09PSAnc3VjY2VzcycpIHtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24ocmVzcG9uc2UpO1xuICAgICAgICBuZXh0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24ocmVzcG9uc2UpO1xuICAgIG5leHQoKTtcbn0pO1xuXG5yb3V0ZXIuZGVsZXRlKCcvdGFza3MnLCBhc3luYyAocmVxOiBSZXF1ZXN0PERlbGV0ZVRhc2tQYXJhbXMsIGFueSwgYW55LCBhbnk+LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pID0+IHtcbiAgICBjb25zdCBjb250ZXh0OiB0eXBlb2YgQ29udGV4dCA9IHJlcy5sb2NhbHMuY29udGV4dDtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNvbnRleHQuZGVsZXRlVGFzay5leGVjdXRlKHJlcS5ib2R5KTtcbiAgICBpZiAocmVzcG9uc2UudHlwZSA9PT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3BvbnNlKTtcbiAgICAgICAgbmV4dCgpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHJlc3BvbnNlKTtcbiAgICBuZXh0KCk7XG59KTtcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiIsImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHRhc2tSb3V0ZXIgZnJvbSAnLi90YXNrX3JvdXRlci90YXNrX3JvdXRlcic7XG5cbmNvbnN0IHJvdXRlciA9IFJvdXRlcigpO1xuXG5yb3V0ZXIudXNlKCcvdGFza3NfbG9nZ2VyJywgdGFza1JvdXRlcik7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiIsImV4cG9ydCB0eXBlIFJlc3VsdDxUPiA9IHtcbiAgZGF0YT86IFQ7XG4gIGVycm9yOiBhbnkgfCBudWxsO1xuICBpc1N1Y2Nlc3M6IGJvb2xlYW47XG59O1xuXG5leHBvcnQgY29uc3QgUmVzdWx0U3VjY2VzcyA9IDxUPihkYXRhOiBUKTogUmVzdWx0PFQ+ID0+ICh7XG4gIGRhdGEsXG4gIGVycm9yOiBudWxsLFxuICBpc1N1Y2Nlc3M6IHRydWUsXG59KTtcblxuZXhwb3J0IGNvbnN0IFJlc3VsdEVycm9yID0gPFQ+KGVycm9yOiBhbnkpOiBSZXN1bHQ8VD4gPT4gKHtcbiAgZXJyb3IsXG4gIGlzU3VjY2VzczogZmFsc2UsXG59KTtcbiIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwibG9kYXNoXCIpOyIsImltcG9ydCB7IFJlc3VsdCwgUmVzdWx0U3VjY2VzcywgUmVzdWx0RXJyb3IgfSBmcm9tICdAL2RvbWFpbi9tb2RlbHMvcmVzdWx0JztcbmltcG9ydCBUYXNrIGZyb20gJ0AvZG9tYWluL21vZGVscy90YXNrJztcbmltcG9ydCB7IE1vZGVsIH0gZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHsgQnVsa1dyaXRlUmVzdWx0LCBEZWxldGVSZXN1bHQgfSBmcm9tICdtb25nb2RiJztcbmltcG9ydCBUYXNrUmVwb3NpdG9yeSBmcm9tICdAL2RvbWFpbi9yZXBvc2l0b3JpZXMvdGFza19yZXBvc2l0b3J5JztcbmltcG9ydCBHZXRUYXNrUGFyYW1zIGZyb20gJ0AvZGF0YS9wYXJhbXMvZ2V0X3Rhc2tfcGFyYW1zJztcbmltcG9ydCB7IGlzQm9vbGVhbiwgaXNOaWwsIG9taXQsIG9taXRCeSwgcGljaywgcmVkdWNlfSBmcm9tICdsb2Rhc2gnXG5pbXBvcnQgQ3JlYXRlVGFza1BhcmFtcyBmcm9tICdAL2RhdGEvcGFyYW1zL2NyZWF0ZV90YXNrX3BhcmFtcyc7XG5pbXBvcnQgVXBkYXRlVGFza1BhcmFtcyBmcm9tICdAL2RhdGEvcGFyYW1zL3VwZGF0ZV90YXNrX3BhcmFtcyc7XG5pbXBvcnQgRGVsZXRlVGFza1BhcmFtcyBmcm9tICdAL2RhdGEvcGFyYW1zL2RlbGV0ZV90YXNrX3BhcmFtcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhc2tSZXBvc2l0b3J5SW1wbCBpbXBsZW1lbnRzIFRhc2tSZXBvc2l0b3J5IHtcbiAgcHJpdmF0ZSByZWFkb25seSB0YXNrQ29sbGVjdGlvbjogTW9kZWw8VGFzaz47XG5cbiAgY29uc3RydWN0b3IodGFza0NvbGxlY3Rpb246IE1vZGVsPFRhc2s+KSB7XG4gICAgdGhpcy50YXNrQ29sbGVjdGlvbiA9IHRhc2tDb2xsZWN0aW9uO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlVGFzayhwYXJhbXM6IERlbGV0ZVRhc2tQYXJhbXMpOiBQcm9taXNlPFJlc3VsdDxEZWxldGVSZXN1bHQ+PiB7XG4gICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCB0aGlzLnRhc2tDb2xsZWN0aW9uLnN0YXJ0U2Vzc2lvbigpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHNlc3Npb24uc3RhcnRUcmFuc2FjdGlvbigpO1xuICAgICAgY29uc3QgdGFza3MgPSBhd2FpdCB0aGlzLnRhc2tDb2xsZWN0aW9uLmRlbGV0ZU1hbnkoe19pZDogeyRpbjogcGFyYW1zLmlkc319LCB7c2Vzc2lvbn0pO1xuICAgICAgYXdhaXQgc2Vzc2lvbi5jb21taXRUcmFuc2FjdGlvbigpO1xuICAgICAgcmV0dXJuIFJlc3VsdFN1Y2Nlc3ModGFza3MpO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgIGF3YWl0IHNlc3Npb24uYWJvcnRUcmFuc2FjdGlvbigpO1xuICAgICAgcmV0dXJuIFJlc3VsdEVycm9yKGUpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBhd2FpdCBzZXNzaW9uLmVuZFNlc3Npb24oKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVUYXNrKHBhcmFtczogVXBkYXRlVGFza1BhcmFtcyk6IFByb21pc2U8UmVzdWx0PEJ1bGtXcml0ZVJlc3VsdD4+IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgdGhpcy50YXNrQ29sbGVjdGlvbi5zdGFydFNlc3Npb24oKTtcblxuICAgIHRyeSB7XG4gICAgICBzZXNzaW9uLnN0YXJ0VHJhbnNhY3Rpb24oKTtcbiAgICAgIGNvbnN0IGNsZWFuVGFza3NQYXJhbXMgPSBwYXJhbXMudGFza3MubWFwKCh0YXNrKSA9PiBvbWl0QnkodGFzaywgaXNOaWwpKTtcbiAgICAgIGNvbnN0IGZvcm1hdFBhcmFtcyA9IGNsZWFuVGFza3NQYXJhbXMubWFwKCh0YXNrKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdXBkYXRlT25lOiB7XG4gICAgICAgICAgICBmaWx0ZXI6IHsgX2lkOiB0YXNrLl9pZCB9LFxuICAgICAgICAgICAgdXBkYXRlOiB7XG4gICAgICAgICAgICAgICRzZXQ6IG9taXQodGFzaywgJ19pZCcpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICBcbiAgICAgIGNvbnN0IHRhc2tzID0gYXdhaXQgdGhpcy50YXNrQ29sbGVjdGlvbi5idWxrV3JpdGUoZm9ybWF0UGFyYW1zLCB7IHNlc3Npb24gfSk7XG4gICAgICBhd2FpdCBzZXNzaW9uLmNvbW1pdFRyYW5zYWN0aW9uKCk7XG4gICAgICByZXR1cm4gUmVzdWx0U3VjY2Vzcyh0YXNrcyk7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgYXdhaXQgc2Vzc2lvbi5hYm9ydFRyYW5zYWN0aW9uKCk7XG4gICAgICByZXR1cm4gUmVzdWx0RXJyb3IoZSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGF3YWl0IHNlc3Npb24uZW5kU2Vzc2lvbigpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVRhc2tzKHBhcmFtczogQ3JlYXRlVGFza1BhcmFtcyk6IFByb21pc2U8UmVzdWx0PFRhc2tbXT4+IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgdGhpcy50YXNrQ29sbGVjdGlvbi5zdGFydFNlc3Npb24oKTtcblxuICAgIHRyeSB7XG4gICAgICBzZXNzaW9uLnN0YXJ0VHJhbnNhY3Rpb24oKTtcbiAgICAgIGNvbnN0IGNsZWFuVGFza3NQYXJhbXMgPSBwYXJhbXMudGFza3MubWFwKCh0YXNrKSA9PiBvbWl0QnkodGFzaywgaXNOaWwpKTtcbiAgICAgIGNvbnN0IHRhc2tzID0gYXdhaXQgdGhpcy50YXNrQ29sbGVjdGlvbi5jcmVhdGUoY2xlYW5UYXNrc1BhcmFtcywgeyBzZXNzaW9uIH0pO1xuICAgICAgYXdhaXQgc2Vzc2lvbi5jb21taXRUcmFuc2FjdGlvbigpO1xuICAgICAgcmV0dXJuIFJlc3VsdFN1Y2Nlc3ModGFza3MpO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgYXdhaXQgc2Vzc2lvbi5hYm9ydFRyYW5zYWN0aW9uKCk7XG4gICAgICByZXR1cm4gUmVzdWx0RXJyb3IoZSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGF3YWl0IHNlc3Npb24uZW5kU2Vzc2lvbigpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFRhc2tzKHBhcmFtczogR2V0VGFza1BhcmFtcyk6IFByb21pc2U8UmVzdWx0PEFycmF5PFRhc2s+Pj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjbGVhblRhc2tQYXJhbXMgPSBvbWl0QnkocGFyYW1zLCBpc05pbCk7XG4gICAgICBjb25zdCBmb3JtYXRQYXJhbXMgPSByZWR1Y2UoY2xlYW5UYXNrUGFyYW1zLCAoYWNjOiBhbnksIGN1cnI6IGFueSwga2V5OiBhbnkpID0+IHtcbiAgICAgICAgYWNjW2tleV0gPSBpc0Jvb2xlYW4oY3VycikgIHx8IGtleSA9PT0gJ19pZCc/IGN1cnIgOiB7ICRyZWdleDogY3VyciwgJG9wdGlvbnM6ICdpJyB9O1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSwge30pO1xuICAgICAgY29uc3QgdGFza3MgPSBhd2FpdCB0aGlzLnRhc2tDb2xsZWN0aW9uLmZpbmQoZm9ybWF0UGFyYW1zKTtcbiAgICAgIHJldHVybiBSZXN1bHRTdWNjZXNzKHRhc2tzKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gUmVzdWx0RXJyb3IoZSk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgVGFzayBmcm9tICdAL2RvbWFpbi9tb2RlbHMvdGFzayc7XG5pbXBvcnQgeyBTY2hlbWEsIG1vZGVsIH0gZnJvbSAnbW9uZ29vc2UnO1xuY29uc3QgVGFza1NjaGVtYSA9IG5ldyBTY2hlbWE8VGFzaz4oXG4gIHtcbiAgICB0aXRsZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgICBkYXRlVGltZToge1xuICAgICAgdHlwZTogRGF0ZSxcbiAgICAgIGRlZmF1bHQ6IERhdGUubm93LFxuICAgIH0sXG4gICAgY29tcGxldGVkOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gIH0sXG4pO1xuXG5jb25zdCBUYXNrQ29sbGVjdGlvbiA9IG1vZGVsPFRhc2s+KCdUYXNrJywgVGFza1NjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IFRhc2tDb2xsZWN0aW9uO1xuIiwiIGV4cG9ydCB0eXBlIFJlc3BvbnNlPFQ+ID0ge1xuICAgIHRpdGxlPzogc3RyaW5nO1xuICAgIG1lc3NhZ2U/OiBzdHJpbmc7XG4gICAgdHlwZTogJ3N1Y2Nlc3MnIHwgJ2Vycm9yJztcbiAgICBkYXRhPzogVDtcbiAgICBlcnJvcj86IEVycm9yO1xufVxuXG5cbmV4cG9ydCBjb25zdCBSZXNwb25zZVN1Y2Nlc3MgPSA8VD4oe3RpdGxlLCBtZXNzYWdlLCBkYXRhfTp7dGl0bGU/OiBzdHJpbmcsIG1lc3NhZ2U/OiBzdHJpbmcsIGRhdGE/OiBUfSk6IFJlc3BvbnNlPFQ+ID0+ICh7XG4gICAgZGF0YTogZGF0YSxcbiAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAgdGl0bGU6IHRpdGxlLFxuICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG59KTtcblxuZXhwb3J0IGNvbnN0IFJlc3BvbnNlRXJyb3IgPSA8VD4oe3RpdGxlLCBtZXNzYWdlLCBlcnJvcn06e3RpdGxlPzogc3RyaW5nLCBtZXNzYWdlPzogc3RyaW5nLCBlcnJvcjogRXJyb3J9KTogUmVzcG9uc2U8VD4gPT4gKHtcbiAgICBlcnJvcjogZXJyb3IsXG4gICAgdHlwZTogJ2Vycm9yJyxcbiAgICB0aXRsZTogdGl0bGUsXG4gICAgbWVzc2FnZTogbWVzc2FnZSxcbn0pOyIsImltcG9ydCBUYXNrUmVwb3NpdG9yeSBmcm9tICdAL2RhdGEvcmVwb3NpdG9yeS90YXNrX3JlcG9zaXRvcnlfaW1wbCc7XG5pbXBvcnQgVGFza0NvbGxlY3Rpb24gZnJvbSAnQC9kYXRhL2NvbGxlY3Rpb25zL3Rhc2tfY29sbGVjdGlvbic7XG5pbXBvcnQgVGFzayBmcm9tICdAL2RvbWFpbi9tb2RlbHMvdGFzayc7XG5pbXBvcnQgVXNlQ2FzZSBmcm9tICdAL2RvbWFpbi91c2VfY2FzZXMvdXNlX2Nhc2UnO1xuaW1wb3J0IEdldFRhc2tQYXJhbXMgZnJvbSAnQC9kYXRhL3BhcmFtcy9nZXRfdGFza19wYXJhbXMnO1xuaW1wb3J0IEdldFRhc2sgZnJvbSAnQC9kb21haW4vdXNlX2Nhc2VzL2dldF90YXNrcyc7XG5pbXBvcnQgQ3JlYXRlVGFza1BhcmFtcyBmcm9tICdAL2RhdGEvcGFyYW1zL2NyZWF0ZV90YXNrX3BhcmFtcyc7XG5pbXBvcnQgQ3JlYXRlVGFza3MgZnJvbSAnQC9kb21haW4vdXNlX2Nhc2VzL2NyZWF0ZV90YXNrcyc7XG5pbXBvcnQgVXBkYXRlVGFza1BhcmFtcyBmcm9tICdAL2RhdGEvcGFyYW1zL3VwZGF0ZV90YXNrX3BhcmFtcyc7XG5pbXBvcnQgeyBCdWxrV3JpdGVSZXN1bHQsIERlbGV0ZVJlc3VsdCB9IGZyb20gJ21vbmdvZGInO1xuaW1wb3J0IFVwZGF0ZVRhc2sgZnJvbSAnQC9kb21haW4vdXNlX2Nhc2VzL3VwZGF0ZV90YXNrJztcbmltcG9ydCBEZWxldGVUYXNrUGFyYW1zIGZyb20gJ0AvZGF0YS9wYXJhbXMvZGVsZXRlX3Rhc2tfcGFyYW1zJztcbmltcG9ydCBEZWxldGVUYXNrcyBmcm9tICdAL2RvbWFpbi91c2VfY2FzZXMvZGVsZXRlX3Rhc2tzJztcblxuaW50ZXJmYWNlIENvbnRleHQge1xuICBnZXRUYXNrczogVXNlQ2FzZTxHZXRUYXNrUGFyYW1zLCBUYXNrW10+O1xuICBjcmVhdGVUYXNrczogVXNlQ2FzZTxDcmVhdGVUYXNrUGFyYW1zLCBUYXNrW10+O1xuICB1cGRhdGVUYXNrOiBVc2VDYXNlPFVwZGF0ZVRhc2tQYXJhbXMsIEJ1bGtXcml0ZVJlc3VsdD47XG4gIGRlbGV0ZVRhc2s6IFVzZUNhc2U8RGVsZXRlVGFza1BhcmFtcywgRGVsZXRlUmVzdWx0Pjtcbn1cblxuY29uc3QgY29udGV4dDogQ29udGV4dCA9IHtcbiAgZ2V0VGFza3M6IG5ldyBHZXRUYXNrKG5ldyBUYXNrUmVwb3NpdG9yeShUYXNrQ29sbGVjdGlvbikpLFxuICBjcmVhdGVUYXNrczogbmV3IENyZWF0ZVRhc2tzKG5ldyBUYXNrUmVwb3NpdG9yeShUYXNrQ29sbGVjdGlvbikpLFxuICB1cGRhdGVUYXNrOiBuZXcgVXBkYXRlVGFzayhuZXcgVGFza1JlcG9zaXRvcnkoVGFza0NvbGxlY3Rpb24pKSxcbiAgZGVsZXRlVGFzazogbmV3IERlbGV0ZVRhc2tzKG5ldyBUYXNrUmVwb3NpdG9yeShUYXNrQ29sbGVjdGlvbikpLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY29udGV4dDtcbiIsImltcG9ydCBUYXNrUmVwb3NpdG9yeSBmcm9tIFwiQC9kYXRhL3JlcG9zaXRvcnkvdGFza19yZXBvc2l0b3J5X2ltcGxcIjtcbmltcG9ydCBVc2VDYXNlIGZyb20gXCJAL2RvbWFpbi91c2VfY2FzZXMvdXNlX2Nhc2VcIjtcbmltcG9ydCBHZXRUYXNrUGFyYW1zIGZyb20gXCJAL2RhdGEvcGFyYW1zL2dldF90YXNrX3BhcmFtc1wiO1xuaW1wb3J0IHtSZXNwb25zZVN1Y2Nlc3MsIFJlc3BvbnNlRXJyb3IsIFJlc3BvbnNlfSBmcm9tIFwiQC9kYXRhL3Jlc3BvbnNlL3Jlc3BvbnNlXCI7XG5pbXBvcnQgVGFzayBmcm9tIFwiQC9kb21haW4vbW9kZWxzL3Rhc2tcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2V0VGFzayBpbXBsZW1lbnRzIFVzZUNhc2U8R2V0VGFza1BhcmFtcywgVGFza1tdPiB7XG4gICAgcHJpdmF0ZSByZWFkb25seSB0YXNrUmVwb3NpdG9yeTogVGFza1JlcG9zaXRvcnk7XG4gICAgY29uc3RydWN0b3IodGFza1JlcG9zaXRvcnk6IFRhc2tSZXBvc2l0b3J5KSB7XG4gICAgICAgIHRoaXMudGFza1JlcG9zaXRvcnkgPSB0YXNrUmVwb3NpdG9yeTtcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZShwYXJhbXM6IEdldFRhc2tQYXJhbXMpOiBQcm9taXNlPFJlc3BvbnNlPFRhc2tbXT4+IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMudGFza1JlcG9zaXRvcnkuZ2V0VGFza3MocGFyYW1zKTtcbiAgICAgIGlmKCFyZXMuaXNTdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiBSZXNwb25zZUVycm9yKHt0aXRsZTogJ0dldCBUYXNrcycsIG1lc3NhZ2U6ICdGYWlsZWQgdG8gcmV0cmlldmUgdGFza3MnLCBlcnJvcjogcmVzLmVycm9yIX0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFJlc3BvbnNlU3VjY2Vzcyh7XG4gICAgICAgIHRpdGxlOiAnR2V0IFRhc2tzJyxcbiAgICAgICAgbWVzc2FnZTogJ1Rhc2tzIGZldGNoZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgZGF0YTogcmVzLmRhdGEhXG4gICAgICB9KTtcbiAgICB9XG59XG4gICAgIiwiaW1wb3J0IENyZWF0ZVRhc2tQYXJhbXMgZnJvbSBcIkAvZGF0YS9wYXJhbXMvY3JlYXRlX3Rhc2tfcGFyYW1zXCI7XG5pbXBvcnQgVXNlQ2FzZSBmcm9tIFwiQC9kb21haW4vdXNlX2Nhc2VzL3VzZV9jYXNlXCI7XG5pbXBvcnQgVGFza1JlcG9zaXRvcnkgZnJvbSBcIkAvZG9tYWluL3JlcG9zaXRvcmllcy90YXNrX3JlcG9zaXRvcnlcIjtcbmltcG9ydCBUYXNrIGZyb20gXCJAL2RvbWFpbi9tb2RlbHMvdGFza1wiO1xuaW1wb3J0IHsgUmVzcG9uc2VFcnJvciwgUmVzcG9uc2VTdWNjZXNzLCBSZXNwb25zZSB9IGZyb20gXCJAL2RhdGEvcmVzcG9uc2UvcmVzcG9uc2VcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ3JlYXRlVGFza3MgaW1wbGVtZW50cyBVc2VDYXNlPENyZWF0ZVRhc2tQYXJhbXMsIFRhc2tbXT4ge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgdGFza1JlcG9zaXRvcnk6IFRhc2tSZXBvc2l0b3J5O1xuICAgIGNvbnN0cnVjdG9yKHRhc2tSZXBvc2l0b3J5OiBUYXNrUmVwb3NpdG9yeSkge1xuICAgICAgICB0aGlzLnRhc2tSZXBvc2l0b3J5ID0gdGFza1JlcG9zaXRvcnk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXJhbXM6IENyZWF0ZVRhc2tQYXJhbXMpOiBQcm9taXNlPFJlc3BvbnNlPFRhc2tbXT4+IHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy50YXNrUmVwb3NpdG9yeS5jcmVhdGVUYXNrcyhwYXJhbXMpO1xuICAgICAgICBpZiAoIXJlcy5pc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiBSZXNwb25zZUVycm9yKHsgdGl0bGU6ICdDcmVhdGUgVGFza3MnLCBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSB0YXNrcycsIGVycm9yOiByZXMuZXJyb3IhIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSZXNwb25zZVN1Y2Nlc3Moe1xuICAgICAgICAgICAgdGl0bGU6ICdDcmVhdGUgVGFza3MnLFxuICAgICAgICAgICAgbWVzc2FnZTogJ1Rhc2tzIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICAgIGRhdGE6IHJlcy5kYXRhIVxuICAgICAgICB9KTtcbiAgICB9XG59IiwiaW1wb3J0IFVzZUNhc2UgZnJvbSBcIkAvZG9tYWluL3VzZV9jYXNlcy91c2VfY2FzZVwiO1xuaW1wb3J0IFRhc2tSZXBvc2l0b3J5IGZyb20gXCJAL2RvbWFpbi9yZXBvc2l0b3JpZXMvdGFza19yZXBvc2l0b3J5XCI7XG5pbXBvcnQgeyBSZXNwb25zZUVycm9yLCBSZXNwb25zZVN1Y2Nlc3MsIFJlc3BvbnNlIH0gZnJvbSBcIkAvZGF0YS9yZXNwb25zZS9yZXNwb25zZVwiO1xuaW1wb3J0IFVwZGF0ZVRhc2tQYXJhbXMgZnJvbSBcIkAvZGF0YS9wYXJhbXMvdXBkYXRlX3Rhc2tfcGFyYW1zXCI7XG5pbXBvcnQgeyBCdWxrV3JpdGVSZXN1bHQgfSBmcm9tIFwibW9uZ29kYlwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVcGRhdGVUYXNrIGltcGxlbWVudHMgVXNlQ2FzZTxVcGRhdGVUYXNrUGFyYW1zLCBCdWxrV3JpdGVSZXN1bHQ+IHtcbiAgICBwcml2YXRlIHJlYWRvbmx5IHRhc2tSZXBvc2l0b3J5OiBUYXNrUmVwb3NpdG9yeTtcbiAgICBjb25zdHJ1Y3Rvcih0YXNrUmVwb3NpdG9yeTogVGFza1JlcG9zaXRvcnkpIHtcbiAgICAgICAgdGhpcy50YXNrUmVwb3NpdG9yeSA9IHRhc2tSZXBvc2l0b3J5O1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGFyYW1zOiBVcGRhdGVUYXNrUGFyYW1zKTogUHJvbWlzZTxSZXNwb25zZTxCdWxrV3JpdGVSZXN1bHQ+PiB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMudGFza1JlcG9zaXRvcnkudXBkYXRlVGFzayhwYXJhbXMpO1xuICAgICAgICBpZiAoIXJlcy5pc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiBSZXNwb25zZUVycm9yKHsgdGl0bGU6ICdVcGRhdGUgVGFza3MnLCBtZXNzYWdlOiAnRmFpbGVkIHRvIHVwZGF0ZSB0YXNrcycsIGVycm9yOiByZXMuZXJyb3IhIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSZXNwb25zZVN1Y2Nlc3Moe1xuICAgICAgICAgICAgdGl0bGU6ICdVcGRhdGUgVGFza3MnLFxuICAgICAgICAgICAgbWVzc2FnZTogJ1Rhc2tzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICAgIGRhdGE6IHJlcy5kYXRhIVxuICAgICAgICB9KTtcbiAgICB9XG59IiwiaW1wb3J0IERlbGV0ZVRhc2tQYXJhbXMgZnJvbSBcIkAvZGF0YS9wYXJhbXMvZGVsZXRlX3Rhc2tfcGFyYW1zXCI7XG5pbXBvcnQgeyBEZWxldGVSZXN1bHQgfSBmcm9tIFwibW9uZ29kYlwiO1xuaW1wb3J0IFVzZUNhc2UgZnJvbSBcIkAvZG9tYWluL3VzZV9jYXNlcy91c2VfY2FzZVwiO1xuaW1wb3J0IFRhc2tSZXBvc2l0b3J5IGZyb20gXCJAL2RvbWFpbi9yZXBvc2l0b3JpZXMvdGFza19yZXBvc2l0b3J5XCI7XG5pbXBvcnQgeyBSZXNwb25zZVN1Y2Nlc3MsIFJlc3BvbnNlLCBSZXNwb25zZUVycm9yIH0gZnJvbSBcIkAvZGF0YS9yZXNwb25zZS9yZXNwb25zZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEZWxldGVUYXNrcyBpbXBsZW1lbnRzIFVzZUNhc2U8RGVsZXRlVGFza1BhcmFtcywgRGVsZXRlUmVzdWx0PiB7XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IHRhc2tSZXBvc2l0b3J5OiBUYXNrUmVwb3NpdG9yeTtcblxuICAgIGNvbnN0cnVjdG9yKHRhc2tSZXBvc2l0b3J5OiBUYXNrUmVwb3NpdG9yeSkge1xuICAgICAgICB0aGlzLnRhc2tSZXBvc2l0b3J5ID0gdGFza1JlcG9zaXRvcnk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXJhbXM6IERlbGV0ZVRhc2tQYXJhbXMpOiBQcm9taXNlPFJlc3BvbnNlPERlbGV0ZVJlc3VsdD4+IHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy50YXNrUmVwb3NpdG9yeS5kZWxldGVUYXNrKHBhcmFtcyk7XG4gICAgICAgIGlmICghcmVzLmlzU3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3BvbnNlRXJyb3IoeyB0aXRsZTogJ0RlbGV0ZSBUYXNrcycsIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZGVsZXRlIHRhc2tzJywgZXJyb3I6IHJlcy5lcnJvciEgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJlc3BvbnNlU3VjY2Vzcyh7XG4gICAgICAgICAgICB0aXRsZTogJ0RlbGV0ZSBUYXNrcycsXG4gICAgICAgICAgICBtZXNzYWdlOiAnVGFza3MgZGVsZXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICAgICAgZGF0YTogcmVzLmRhdGEhXG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCJpbXBvcnQgZXhwcmVzcywgeyBSZXF1ZXN0SGFuZGxlciB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgaGVsbWV0IGZyb20gJ2hlbG1ldCc7XG5pbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHJvdXRlciBmcm9tICcuL3JvdXRlcnMnO1xuaW1wb3J0IHsgaW5qZWN0IH0gZnJvbSAnLi9yb3V0ZXJzL21pZGRsZXdhcmUvbWlkZGxld2FyZSc7XG5cbmNvbnN0IHNlcnZlciA9IGV4cHJlc3MoKTtcblxuc2VydmVyXG4gIC51c2UoaGVsbWV0KCkpXG4gIC51c2UoXG4gICAgY29ycyh7XG4gICAgICBvcmlnaW46IChyZXF1ZXN0T3JpZ2luLCBjYWxsYmFjaykgPT4ge1xuICAgICAgICAvLyBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgfHwgX2luY2x1ZGVzKGFsbG93ZWRPcmlnaW5zLCByZXF1ZXN0T3JpZ2luKSkge1xuICAgICAgICAvLyAgICAgY2FsbGJhY2sobnVsbCwgdHJ1ZSk7XG4gICAgICAgIC8vICAgICByZXR1cm47XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gY2FsbGJhY2sobmV3IEVycm9yKCdOb3QgYWxsb3dlZCBieSBDT1JTJykpO1xuICAgICAgICBjYWxsYmFjayhudWxsLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSxcbiAgICB9KSxcbiAgKVxuICAudXNlKGV4cHJlc3MuanNvbigpKVxuICAudXNlKGluamVjdCBhcyBSZXF1ZXN0SGFuZGxlcilcbiAgLnVzZShyb3V0ZXIpO1xuXG5zZXJ2ZXIuZ2V0KCcvJywgKF9yZXEsIHJlcykgPT4ge1xuICByZXMuc2VuZCgn4pyFIE1vbmdvREIgY29ubmVjdGVkIHN1Y2Nlc3NmdWxseSEnKTtcbn0pO1xuXG5tb25nb29zZVxuICAuY29ubmVjdChwcm9jZXNzLmVudi5NT05HT19VUkkhKVxuICAudGhlbigoKSA9PiB7XG4gICAgc2VydmVyXG4gICAgICAubGlzdGVuKDMwMDAsICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlciBpcyBydW5uaW5nIG9uIHBvcnQgMzAwMCcpO1xuICAgICAgfSlcbiAgICAgIC5vbignZXJyb3InLCAoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbU2VydmVyXSBFcnJvciBzdGFydGluZyBzZXJ2ZXI6ICcsIGVycik7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KVxuICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdbTW9uZ29EQl0gRXJyb3IgY29ubmVjdGluZyB0byBNb25nb0RCOiAnLCBlcnIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfSk7XG4iLCJpbXBvcnQgeyBOZXh0RnVuY3Rpb24sIFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgY29udGV4dCBmcm9tICdAL2RhdGEvY29udGV4dCc7XG5cbmV4cG9ydCBjb25zdCBpbmplY3QgPSAoXG4gIHJlcTogUmVxdWVzdDxhbnksIGFueSwgYW55LCBhbnk+LFxuICByZXM6IFJlc3BvbnNlLFxuICBuZXh0OiBOZXh0RnVuY3Rpb24sXG4pID0+IHtcbiAgcmVzLmxvY2Fscy5jb250ZXh0ID0gY29udGV4dDtcbiAgbmV4dCgpO1xufTtcblxuLy8gZXhwb3J0IGNvbnN0IGVycm9ySGFuZGxlcjogRXJyb3JSZXF1ZXN0SGFuZGxlciA9IChlcnI6IEVycm9yLCByZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UsIG5leHQ6IE5leHRGdW5jdGlvbikgPT4ge1xuLy8gICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbi8vICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InIH0pO1xuLy8gfVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGluamVjdCxcbn07XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSB1c2VkICdtb2R1bGUnIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbl9fd2VicGFja19yZXF1aXJlX18oMTgwKTtcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2ODApO1xuIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwiZ2V0IiwiYXN5bmMiLCJyZXEiLCJyZXMiLCJuZXh0IiwiY29udGV4dCIsImxvY2FscyIsInJlc3BvbnNlIiwiZ2V0VGFza3MiLCJleGVjdXRlIiwiYm9keSIsInR5cGUiLCJzdGF0dXMiLCJqc29uIiwicG9zdCIsImNyZWF0ZVRhc2tzIiwicHV0IiwidXBkYXRlVGFzayIsImRlbGV0ZSIsImRlbGV0ZVRhc2siLCJ1c2UiLCJSZXN1bHRTdWNjZXNzIiwiZGF0YSIsImVycm9yIiwiaXNTdWNjZXNzIiwiUmVzdWx0RXJyb3IiLCJUYXNrUmVwb3NpdG9yeUltcGwiLCJ0YXNrQ29sbGVjdGlvbiIsImNvbnN0cnVjdG9yIiwidGhpcyIsInBhcmFtcyIsInNlc3Npb24iLCJzdGFydFNlc3Npb24iLCJzdGFydFRyYW5zYWN0aW9uIiwidGFza3MiLCJkZWxldGVNYW55IiwiX2lkIiwiJGluIiwiaWRzIiwiY29tbWl0VHJhbnNhY3Rpb24iLCJlIiwiY29uc29sZSIsImFib3J0VHJhbnNhY3Rpb24iLCJlbmRTZXNzaW9uIiwiZm9ybWF0UGFyYW1zIiwibWFwIiwidGFzayIsIm9taXRCeSIsImlzTmlsIiwidXBkYXRlT25lIiwiZmlsdGVyIiwidXBkYXRlIiwiJHNldCIsIm9taXQiLCJidWxrV3JpdGUiLCJjbGVhblRhc2tzUGFyYW1zIiwiY3JlYXRlIiwiY2xlYW5UYXNrUGFyYW1zIiwicmVkdWNlIiwiYWNjIiwiY3VyciIsImtleSIsImlzQm9vbGVhbiIsIiRyZWdleCIsIiRvcHRpb25zIiwiZmluZCIsIlRhc2tTY2hlbWEiLCJTY2hlbWEiLCJ0aXRsZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZGVzY3JpcHRpb24iLCJkYXRlVGltZSIsIkRhdGUiLCJkZWZhdWx0Iiwibm93IiwiY29tcGxldGVkIiwiQm9vbGVhbiIsInRpbWVzdGFtcHMiLCJtb2RlbCIsIlJlc3BvbnNlU3VjY2VzcyIsIm1lc3NhZ2UiLCJSZXNwb25zZUVycm9yIiwidGFza1JlcG9zaXRvcnkiLCJzZXJ2ZXIiLCJvcmlnaW4iLCJyZXF1ZXN0T3JpZ2luIiwiY2FsbGJhY2siLCJfcmVxIiwic2VuZCIsInRoZW4iLCJsaXN0ZW4iLCJsb2ciLCJvbiIsImVyciIsInByb2Nlc3MiLCJleGl0IiwiY2F0Y2giLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=